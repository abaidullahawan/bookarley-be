<style>
  .dropdown-menu-width {
    width: -webkit-fill-available !important;
  }

  .circle-image {
    width: 40px;
    height: 40px;
    border: 0.5px solid lightgray;
    border-radius: 50%;
    object-fit: cover;
  }
  .all-cat-dropdown{
    margin-bottom: -5px;
    margin-top: 5px;
    margin-right: 10px;
    margin-left: 20px;
    background: white;
    width: 300px;
    padding-top: 15px !important;
    padding-bottom: 15px !important;
    border-top-left-radius: 5px !important;
    border-top-right-radius: 5px !important;
    border-bottom-right-radius: 0px !important;
    border-bottom-left-radius: 0px !important;
    font-weight: bold;
  }
  .dropdown-toggle::after {
    display: none;
  }

  .all-ctg-text{
    float: left;
    color: black;
    font-weight: 500;
    margin-left: 25px;
    font-size: 1.3rem;
  }

  .ctg-list-text{
    color: black;
    font-weight: 500;
    margin-left: 25px;
    font-size: 1.35rem;
  }

  .all-ctg-icon{
    float: right;
    color: black;
    margin-top: 6px;
    margin-right: 11px;
  }

  .dropdown-menu-width {
    width: -webkit-fill-available !important;
  }

  .navbar-nav .nav-gap {
    margin-right: 5px;
  }


  /* Dropdown Button */
  .dropbtn {
    padding: 16px;
    border: none;
    cursor: pointer;
  }



  /* The container <div> - needed to position the dropdown content */
  .dropdown {
    position: relative;
    display: inline-block;
  }

  /* Dropdown Content (Hidden by Default) */
  .dropdown-content {
    display: none;
    position: absolute;
    background-color: white;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
  }


  /* Links inside the dropdown */
  .dropdown-content a {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
    font-size: 1.2em;
  }


  .show {display:block;}

  .custom-dropdown {
    position: relative;
    display: inline-block;
  }
  
  .dropdown-content-unique {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
    right: 10px;
  }
  
  .custom-dropdown:hover .dropdown-content-unique {
    display: block;
  }

  .profile-dropdown{
    display: flex;
    flex-direction: column;
    font-size: 1em;
  }


</style>

<nav class="navbar navbar-expand-sm navbar-light bg-white py-3 px-5 fixed-top" style="z-index: 100;">
  <div class="container-fluid">
      <%= link_to root_path do %>
        <a href="#" class="navbar-brand"><%= image_tag("bookarley-logo.png", alt: "Logo", width: 60) %></a>
      <% end %>
      <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
          <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
          <%= render 'shared/search/search_bar', class:"mx-auto", taxons: taxons, taxon: taxon %>
          <div class="navbar-nav">
            <div class="custom-dropdown">
              <div class="btn-group">
                  <%= image_tag('bookarley-logo.png', class: "circle-image", id: "dropdown-button") %>
              </div>
              <div class="dropdown-content-unique px-3 py-3">
                <div class="profile-dropdown">
                  <% if spree_current_user %>
                    <%= link_to I18n.t('my_account'), account_path, class: 'auth-link text-dark mb-3', style:"font-size: 1.1em;" %>
                  <% else %>
                    <%= link_to I18n.t('spree.login'), login_path, class: 'auth-link text-dark', style:"font-size: 1.1em;" %>
                  <% end %>

                  <div class="cart-link" id="link-to-cart" data-top-bar-target="cartLink">
                    <noscript>
                      <%= link_to t('spree.cart'), cart_path %>
                    </noscript>
                  </div>
                </div>  
              </div>
            </div>
          </div>
      </div>
  </div>
</nav>
<nav class="navbar navbar-expand-lg navbar-dark fixed-top py-2" style="z-index: 2; margin-top: 73px; background: #1e396b;">
    <div class="container-fluid">
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <!-- Example Dropdown -->
            <div class="dropdown">
                <!-- Dropdown Toggle Button -->
                <button class="btn btn-light text-dark dropdown-toggle all-cat-dropdown dropbtn" onclick="ctgDropDown()">
                    <span class="all-ctg-text">All Categories</span><i class="fas fa-chevron-down all-ctg-icon"></i>
                </button>

                <!-- Dropdown Menu -->
                <div class="dropdown-menu dropdown-content dropdown-menu-width" id="myDropdown">
                    <% Spree::Taxonomy.all.each do |taxonomy| %>
                      <a href="/products"><%= taxonomy.name %></a>
                    <% end %>
                </div>
            </div>

            <div class="navbar-nav" style="margin-left: 7px;">
              <% Spree::Taxonomy.all.each do |taxonomy| %>
                  <a href="/products" class="nav-item nav-link nav-gap ctg-list-text active"><%= taxonomy.name %></a>
              <% end %>    
            </div>
        </div>
        <div class="navbar-nav" style="margin-right: 26px">
          <button class="px-5 py-3 seller-btn btn btn-lg" type="button">Become a Seller</button>
        </div>
    </div>
</nav>

<script>
  function ctgDropDown() {
    document.getElementById("myDropdown").classList.toggle("show");
  }

  // Close the dropdown menu if the user clicks outside of it
  window.onclick = function(event) {
    if (!event.target.matches('.dropbtn')) {
      var dropdowns = document.getElementsByClassName("dropdown-content");
      var i;
      for (i = 0; i < dropdowns.length; i++) {
        var openDropdown = dropdowns[i];
        if (openDropdown.classList.contains('show')) {
          openDropdown.classList.remove('show');
        }
      }
    }
  }
</script>